<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.13/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.8.0/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.13/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.8.0/dist/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datejs/1.0/date.min.js"
        integrity="sha512-/n/dTQBO8lHzqqgAQvy0ukBQ0qLmGzxKhn8xKrz4cn7XJkZzy+fAtzjnOQd5w55h4k1kUC+8oIe6WmrGUYwODA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Coin</title>
</head>
<style>
    .upperContainer {
        border: 2px solid black;
        display: flex;
    }

    .uc-left-container {
        border: 2px solid black;
    }

    .logo {
        border: 2px solid black;
    }

    #myChart {
        background-color: rgb(3, 3, 3);
        height: auto;
        width: 50%;
    }

    .price {
        border: 2px solid black;
    }

    .change {
        border: 2px solid black;
    }

    .uc-right-container {
        border: 2px solid black;
    }

    .atl {
        border: 2px solid black;
    }

    .ath {
        border: 2px solid black;
    }

    .social {
        border: 2px solid black;
    }

    .second-container {
        border: 2px solid black;
    }

    .sc-left-container {
        border: 2px solid black;
    }

    .sc-right-container {
        border: 2px solid black;
    }

    .mcap {
        border: 2px solid black;
    }

    .mcap-change24 {
        border: 2px solid black;
    }

    .fdv {
        border: 2px solid black;
    }

    .circulating-supply {
        border: 2px solid black;
    }

    .name {
        border: 2px solid black;
    }

    .total-supply {
        border: 2px solid black;
    }

    .max-supply {
        border: 2px solid black;
    }

    .chart-container {
        border: 2px solid black;
    }

    .about-container {
        border: 2px solid black;
    }

    .outerChart {
        width: 80%;
        margin: 10px;
    }
</style>

<body>
    <div class="upperContainer">
        <div class="uc-left-container">
            <div class="logo"><img id="logo" src="" alt=""></div>
            <span class="name" id="symbol"></span>
            <br>
            <span id="price" class="price"></span>
            <span id="change" class="change"></span>
        </div>
        <div class="uc-right-container">
            <span class="atl" id="atl"></span>
            <span class="ath" id="ath"></span>
            <span id="website" class="website"></span>
        </div>

    </div>
    <div class="second-container">

        <div class="sc-left-container">
            <span id="mcap" class="mcap"></span>
            <span id="mcap-change24" class="mcap-change24"></span>
            <span id="fdv" class="fdv"></span>
        </div>
        <div class="sc-right-container">
            <span id="cs" class="circulating-supply"></span>
            <span id="ts" class="total-supply"></span>
            <span id="ms" class="max-supply"></span>
        </div>
    </div>
    <div class="outerChart">
        <div class="chart-container"><canvas id="myChart"></canvas>
            <div class="timeOptions">
                <button onclick="oneMonth()">1 Month </button>
                <button onclick="threeMonth()">3 Month</button>
                <button onclick="sixMonth()">6 Month</button>
                <button onclick="oneYear()">1 Year</button>
            </div>
        </div>
    </div>
    <div class="about-container"></div>
    <script>
        //for other data  ----START-----------
        fetch("https://api.coingecko.com/api/v3/coins/bitcoin")
            .then(response => response.json())
            .then(response_data => {
                document.getElementById("logo").setAttribute("src", `${response_data.image.large}`)
                document.getElementById("price").innerHTML = response_data.market_data.current_price.usd
                document.getElementById("change").innerHTML = response_data.market_data.price_change_percentage_24h
                document.getElementById("symbol").innerHTML = response_data.name + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + (response_data.symbol)
                document.getElementById("atl").innerHTML = "ATL : $" + response_data.market_data.atl.usd
                document.getElementById("ath").innerHTML = "ATH : $" + response_data.market_data.ath.usd
                document.getElementById("mcap").innerHTML = "Market Capital : $" + response_data.market_data.market_cap.usd
                document.getElementById("mcap-change24").innerHTML = "Market Cap Change In 24H :" + response_data.market_data.market_cap_change_24h_in_currency.usd
                document.getElementById("cs").innerHTML = "Circulating Supply :" + response_data.market_data.circulating_supply
                document.getElementById("ts").innerHTML = "Total Supply :" + response_data.market_data.total_supply
                document.getElementById("ms").innerHTML = "Max Supply :" + response_data.market_data.max_supply
                document.getElementById("website").innerHTML = "Website :" + response_data.links.homepage[0]

            })
        // -------END-----------
        // var priceArray = [];
        // fetch("https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=100")
        //     .then(chartResponse => chartResponse.json())
        //     .then(chartdata => {
        //         console.log(chartdata)
        //         for (var i = 0; i < 100; i++) {
        //             // console.log("data" + chartdata.prices[i][1])
        //             priceArray.push(chartdata.prices[i][1])
        //         }
        //         console.log(priceArray)
        //     })
        // var a = [44459.59162774341, 43980.707382090906, 42491.97839335905, 39200.29973557414, 39463.14681149058, 38442.99174588676, 38076.49382252028, 38732.93701302586, 41986.03444607623, 39468.35477300189, 38775.17558840679, 38903.69354800599, 37852.52514106289, 39669.423812004505, 39331.84654059453, 41165.63506140341, 41001.70957801974, 41837.41313797566, 42201.939920688186, 41283.25900104565, 41061.81589384987, 42401.895597489434, 42802.15471016985, 43936.09623454058, 44331.77795706412, 44510.84421762133, 46715.1176185105, 46994.879118357465, 47459.261237539096, 47063.36584996355, 45528.40715313835, 46270.20070585378, 45842.14476317382, 46434.562982661664, 46622.63571309101, 45635.45438126673, 43198.77526936491, 43515.15032279806, 42315.70972421807, 42796.39747810973, 42274.907370256085, 39603.965159284155, 40205.67794073206, 41205.16871904067, 39959.457069033735, 40586.59730938673, 40450.37930543977, 39739.11925622209, 40833.5379650337, 41498.12244669832, 41397.220477279625, 40528.54148675958, 39756.848993471016, 39561.78019075613, 39469.04986198146, 40488.877917622376, 38134.21545068938, 39237.94931747103, 39741.766645809636, 38650.55013809267, 37820.61176529208, 38537.65476669535, 38561.56539902362, 37758.496107734, 39699.02404125388, 36612.229548803036, 36116.394294982965, 35573.31019883488, 34070.31219757961, 30269.586956629482, 31026.93386836242, 28913.48836365432, 29126.11597686014, 29310.728959858257, 30189.333177005963, 31319.309111130002, 29923.606993639707, 30502.19328027689, 28772.200501112577, 30382.40624219559, 29256.813374416255, 29491.507947760598, 30351.050417138096, 29163.167775739188, 29655.02613175249, 29584.949851985926, 29346.781442431617, 28646.65218193245, 29088.236452817226, 29492.503214953642, 31740.94072516695, 31865.749621173167, 29833.450330205254, 30481.013996026013, 29714.143487149733, 29872.3603087139, 29917.764052456198, 31372.5847629755, 31265.469277693348, 30229.236836130378]
        // console.log(a.length)

        // chartdata https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=max
        // Data https://api.coingecko.com/api/v3/coins/bitcoin
    </script>
    <script>
        var priceArray = [];
        var ii = [];
        var dateformate1;
        var finaldate;

        function oneMonth() {
            fetch("https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=30")
                .then(chartResponse => chartResponse.json())
                .then(chartdata => {
                    priceArray = [];
                    ii = [];

                    console.log(chartdata)
                    for (var i = 0; i < 30; i++) {
                        // console.log("data" + chartdata.prices[i][1])
                        priceArray.push(chartdata.prices[i][1])
                        dateformate1 = Date.today().addDays(-30 + i)
                        dateformate1 = dateformate1.toString()
                        finaldate = dateformate1.slice(3, 15)
                        ii.push(finaldate);

                    }
                    console.log(Date.today().addDays(-365))
                    chart()
                    // console.log(priceArray)
                })
        }
        function threeMonth() {
            fetch("https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=90")
                .then(chartResponse => chartResponse.json())
                .then(chartdata => {
                    console.log(chartdata)
                    priceArray = [];
                    ii = [];

                    for (var i = 0; i < 90; i++) {
                        // console.log("data" + chartdata.prices[i][1])
                        priceArray.push(chartdata.prices[i][1])
                        dateformate1 = Date.today().addDays(-90 + i)
                        dateformate1 = dateformate1.toString()
                        finaldate = dateformate1.slice(3, 15)
                        ii.push(finaldate);

                    }
                    console.log(Date.today().addDays(-365))
                    chart()
                    // console.log(priceArray)
                })
        }
        function chart() {
            document.getElementById('myChart').innerHTML = ""
            const ctx = document.getElementById('myChart').getContext('2d');
            if (window.yourChart != null) {
                window.yourChart.destroy();
                const myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ii,
                        datasets: [{
                            label: ' Price in $',
                            data: priceArray,

                            borderColor: [
                                '#f88605',
                                '#f88600'

                            ],
                            borderWidth: 1
                        }]
                    },

                    backgroundColor: '#00000',
                    options: {
                        chartArea: {
                            backgroundColor: 'rgba(0, 0, 0, 0)'
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                            }
                        }
                    }
                });
            }
            else {
                const myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ii,
                        datasets: [{
                            label: ' Price in $',
                            data: priceArray,

                            borderColor: [
                                '#f88605',
                                '#f88600'

                            ],
                            borderWidth: 1
                        }]
                    },

                    backgroundColor: '#00000',
                    options: {
                        chartArea: {
                            backgroundColor: 'rgba(0, 0, 0, 0)'
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                            }
                        }
                    }
                });
            }

            myChart.distroy()
        }
        console.log("datejs :",)
    </script>
</body>

</html>